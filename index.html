<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Password Generator</title>
    <!-- <link rel="stylesheet" href="assets/css/normalize.css"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">

</head>

<body>

    <h1 class="text-center text-muted">Password Generator</h1>

    <div class="container">
        <div class="row">
            <h2>Generate a Password<h2>
        </div>
        <hr>
        <div class="row">
            <textarea class="content-box" id="pswd-box">Your Secure Passwod</textarea>
        </div>
        <hr>
        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-">
                <button onclick="generatePassword()" type="button" class="btn btn-info bg-danger d-inline">
                    Generate Password</button>
                    <div class="col-sm-2"></div>
                    <div class="col-sm-2"></div>

            </div>
            <div class="col-sm-4">
                <button onclick="clipboard()" type="button" class="btn btn-info bg-secondary d-inline float-right">
                    Copy to Clipboard</button>
            </div>

        </div>
    </div>

    <script>

        var pwdChoices = {
            pwdLength: 0,
            pwdNumber: true,
            pwdSpecial: true,
            pwdUpper: true,
            pwdLower: true,
        }

        function generatePassword() {
            
            var pwdCharcters = "";
            lowerCase = "abcdefghijklmnopqrstuvwxyz";
            upperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            numeric = "0123456789";
            special = "!@#$%^&*(){,}[]=<>/.";
            yourPassword = "";
       
        var typeSelected = 0;

       var lengthChoice = parseInt(prompt("How many characters"));

            if (lengthChoice > 7 && lengthChoice < 129) {
                pwdChoices.pwdLength = lengthChoice;
            }
            else {
                alert("That is not valid. Pleae enter a number between 8 & 20");
                generatePassword();
            }

            var numericChoice = confirm("Want numbers?")

            if (numericChoice === true) {
                typeSelected = typeSelected + 1;
                pwdChoices.pwdNumber = true;
                pwdCharcters += numeric;
            } else {
                pwdChoices.pwdNumber = false;
                // typeSelected = false;
            }

            var upperChoice = confirm("Want UPPERCASE?");

            if (upperChoice === true) {
                typeSelected = typeSelected + 1;
                pwdChoices.pwdUpper = true;
                pwdCharcters += upperCase;
            } else {
                pwdChoices.pwdUpper = false;
            }

            var lowerChoice = confirm("Want lowercase?");
            if (lowerChoice === true) {
                typeSelected = typeSelected + 1;
                pwdChoices.pwdLower = true;
                pwdCharcters += lowerCase;
            } else {
                pwdChoices.pwdLower = false;
            }

            var specialChoice = confirm("Want Characters?");
            if (specialChoice === true) {
                typeSelected = typeSelected + 1;
                pwdChoices.pwdSpecial = true;
                pwdCharcters += special;
            } else {
                pwdChoices.pwdNumber = false;
            }

            if (typeSelected === 0) {
                alert("You must select at least one type");
                typeSelected = 0;
                generatePassword();
            }
           

            for (var i = 0; i < pwdChoices.pwdLength; i++) {
                var getChar = pwdCharcters[Math.floor(Math.random() * pwdCharcters.length)];
                yourPassword += getChar;
            }

            document.getElementById("pswd-box").innerHTML = yourPassword;
        
        }

        function clipboard() {
             var copyText = document.getElementById('pswd-box');
                console.log("copy " + copyText);
                console.log(yourPassword);
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
                alert("Copied the text: " + yourPassword);
                yourPassword = "";
            }

    </script>